<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Fincal by felixfan</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Fincal</h1>
        <h2>Package for time value of money calculation, time series analysis and computational finance</h2>
        <a href="https://github.com/felixfan/FinCal" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a name="examples-of-using-fincal" class="anchor" href="#examples-of-using-fincal"><span class="octicon octicon-link"></span></a>Examples of using FinCal</h1>

<p>Created on Fri Jul 19 2013<br>
Updated on Wed Sep 25 15:52:34 2013   </p>

<h2>
<a name="fincal----time-value-of-money-time-series-analysis-and-computational-finance" class="anchor" href="#fincal----time-value-of-money-time-series-analysis-and-computational-finance"><span class="octicon octicon-link"></span></a>FinCal -- Time Value of Money, time series analysis and Computational Finance</h2>

<p>FinCal is available on <a href="http://cran.r-project.org/web/packages/FinCal/">CRAN</a> and <a href="http://felixfan.github.io/FinCal/">GitHub</a></p>

<div class="highlight highlight-r"><pre><span class="c">library(FinCal)</span>
</pre></div>

<p>Functions available:    </p>

<div class="highlight highlight-r"><pre><span class="c">ls("package:FinCal")</span>
</pre></div>

<pre><code> [1] "bdy"                   "bdy2mmy"              
 [3] "candlestickChart"      "cash.ratio"           
 [5] "coefficient.variation" "cogs"                 
 [7] "current.ratio"         "date.breaks"          
 [9] "ddb"                   "debt.ratio"           
[11] "diluted.EPS"           "discount.rate"        
[13] "ear"                   "ear.continuous"       
[15] "ear2bey"               "ear2hpr"              
[17] "EPS"                   "financial.leverage"   
[19] "fv"                    "fv.annuity"           
[21] "fv.simple"             "fv.uneven"            
[23] "geometric.mean"        "get.ohlc.google"      
[25] "get.ohlc.yahoo"        "get.ohlcs.google"     
[27] "get.ohlcs.yahoo"       "gpm"                  
[29] "harmonic.mean"         "hpr"                  
[31] "hpr2bey"               "hpr2ear"              
[33] "hpr2mmy"               "irr"                  
[35] "iss"                   "lineChart"            
[37] "lineChartMult"         "lt.d2e"               
[39] "mmy2hpr"               "n.period"             
[41] "npm"                   "npv"                  
[43] "pmt"                   "pv"                   
[45] "pv.annuity"            "pv.perpetuity"        
[47] "pv.simple"             "pv.uneven"            
[49] "quick.ratio"           "r.continuous"         
[51] "r.norminal"            "r.perpetuity"         
[53] "sampling.error"        "SFRatio"              
[55] "Sharpe.ratio"          "slde"                 
[57] "total.d2e"             "twrr"                 
[59] "volumeChart"           "was"                  
[61] "wpr"                  
</code></pre>

<p>Getting help on a function (e.g., pv)    </p>

<pre><code>help{pv}    # display the documentation for the function
args{pv}    # see arguments of the function
example{pv} # see example of using the function
</code></pre>

<pre><code>Note: for all examples, cash inflows are positive and outflows are negative.
</code></pre>

<h2>
<a name="example-1-computing-effective-annual-rate-ear----" class="anchor" href="#example-1-computing-effective-annual-rate-ear----"><span class="octicon octicon-link"></span></a>Example 1 Computing effective annual rate (EAR)    </h2>

<p>Using a stated rate of 4.25%, compute EARs for semiannual, quarterly, monthly, daily and continuous compounding.   </p>

<div class="highlight highlight-r"><pre><span class="c">ear(0.0425, 2)</span>
</pre></div>

<pre><code>[1] 0.04295
</code></pre>

<div class="highlight highlight-r"><pre><span class="c">ear(0.0425, 4)</span>
</pre></div>

<pre><code>[1] 0.04318
</code></pre>

<div class="highlight highlight-r"><pre><span class="c">ear(0.0425, 12)</span>
</pre></div>

<pre><code>[1] 0.04334
</code></pre>

<div class="highlight highlight-r"><pre><span class="c">ear(0.0425, 365)</span>
</pre></div>

<pre><code>[1] 0.04341
</code></pre>

<div class="highlight highlight-r"><pre><span class="c">ear.continuous(0.0425)</span>
</pre></div>

<pre><code>[1] 0.04342
</code></pre>

<h2>
<a name="example-2-future-value-fv-of-a-single-sum" class="anchor" href="#example-2-future-value-fv-of-a-single-sum"><span class="octicon octicon-link"></span></a>Example 2 Future value (FV) of a single sum</h2>

<p>Calculate the FV of a $500 investment at the end of ten years if it earns an annually compounded rate of return of 6%.   </p>

<div class="highlight highlight-r"><pre><span class="c">fv.simple(r = 0.06, n = 10, pv = -500)</span>
</pre></div>

<pre><code>[1] 895.4
</code></pre>

<h2>
<a name="example-3-pv-of-a-single-sum" class="anchor" href="#example-3-pv-of-a-single-sum"><span class="octicon octicon-link"></span></a>Example 3 PV of a single sum</h2>

<p>Given a discount rate of 3%, calculate the PV of a $1,000,000 cash flow that will be received in five years.   </p>

<div class="highlight highlight-r"><pre><span class="c">pv.simple(r = 0.03, n = 5, fv = 1e+06)</span>
</pre></div>

<pre><code>[1] -862609
</code></pre>

<h2>
<a name="example-4-fv-of-an-ordinary-annuity-and-annuity-due" class="anchor" href="#example-4-fv-of-an-ordinary-annuity-and-annuity-due"><span class="octicon octicon-link"></span></a>Example 4 FV of an ordinary annuity and annuity due</h2>

<p>What is the future value of an ordinary annuity that pays $15,000 per year at the end of each of the next 25 years, given the investment is expected to earn a 6% rate of return?    </p>

<div class="highlight highlight-r"><pre><span class="c">fv.annuity(r = 0.06, n = 25, pmt = -15000, type = 0)</span>
</pre></div>

<pre><code>[1] 822968
</code></pre>

<p>What is the future value of an annuity that pays $10,000 per year at the beginning of each of the next three years, commencing today, if the cash flows can be invested at an annual rate of 5%?    </p>

<div class="highlight highlight-r"><pre><span class="c">fv.annuity(r = 0.05, n = 3, pmt = -10000, type = 1)</span>
</pre></div>

<pre><code>[1] 33101
</code></pre>

<h2>
<a name="example-5-pv-of-an-ordinary-annuity-and-annuity-due" class="anchor" href="#example-5-pv-of-an-ordinary-annuity-and-annuity-due"><span class="octicon octicon-link"></span></a>Example 5 PV of an ordinary annuity and annuity due</h2>

<p>What is the PV of an annuity that pays $20,000 per year at the end of each of the next 25 years, given a 6% discount rate?</p>

<div class="highlight highlight-r"><pre><span class="c">pv.annuity(r = 0.06, n = 25, pmt = -20000, type = 0)</span>
</pre></div>

<pre><code>[1] 255667
</code></pre>

<p>Given a discount rate of 10%, what is the present value of a 10-year annuity that makes a series of $1000 payments at the beginning of each of the next three years, starting today?   </p>

<div class="highlight highlight-r"><pre><span class="c">pv.annuity(r = 0.1, n = 10, pmt = -1000, type = 1)</span>
</pre></div>

<pre><code>[1] 6759
</code></pre>

<h2>
<a name="example-6-pv-of-a-perpetuity" class="anchor" href="#example-6-pv-of-a-perpetuity"><span class="octicon octicon-link"></span></a>Example 6 PV of a perpetuity</h2>

<p>A preferred stock that will pay $2.50 per year in annual dividends beginning next year and plans to follow this dividend policy forever. Given an 10% rate of return, what is the value of this preferred stock today?</p>

<div class="highlight highlight-r"><pre><span class="c">pv.perpetuity(r = 0.1, pmt = 2.5, type = 0)</span>
</pre></div>

<pre><code>[1] -25
</code></pre>

<h2>
<a name="example-7-rate-of-return-for-a-perpetuity" class="anchor" href="#example-7-rate-of-return-for-a-perpetuity"><span class="octicon octicon-link"></span></a>Example 7 Rate of return for a perpetuity</h2>

<p>Using the preferred stock described in the preceding example, determine the rate of return that an investor would realize if she paid $75 per share for the stock.</p>

<div class="highlight highlight-r"><pre><span class="c">r.perpetuity(pmt = 2.5, pv = -75)</span>
</pre></div>

<pre><code>[1] 0.03333
</code></pre>

<h2>
<a name="example-8-pv-of-a-bonds-cash-flows" class="anchor" href="#example-8-pv-of-a-bonds-cash-flows"><span class="octicon octicon-link"></span></a>Example 8 PV of a bond's cash flows</h2>

<p>A bond will make coupon interest payments of 70 HK$ (7% of its face value) at the end of each year and will also pay its face value of 1,000 HK$ at maturity in 10 years. If the appropriate discount rate is 6%, what is the present value of the bond's promised cash flows?     </p>

<div class="highlight highlight-r"><pre><span class="c">pv(r = 0.06, n = 10, fv = 1000, pmt = 70, type = 0)</span>
</pre></div>

<pre><code>[1] -1074
</code></pre>

<h2>
<a name="example-9-computing-the-fv-and-pv-of-an-uneven-cash-how-series" class="anchor" href="#example-9-computing-the-fv-and-pv-of-an-uneven-cash-how-series"><span class="octicon octicon-link"></span></a>Example 9 Computing the FV and PV of an uneven cash How series</h2>

<p>Using a rate of return of 6%, compute the future value of the 6-year uneven cash flow stream occured at the end of each year.  (-10000 -5000 2000 4000 6000 8000)</p>

<div class="highlight highlight-r"><pre><span class="c">fv.uneven(r = 0.06, cf = c(-10000, -5000, 2000, 4000, 6000, 8000))</span>
</pre></div>

<pre><code>[1] -1542
</code></pre>

<p>Compute the present value of this 6-year uneven cash How stream described above using a 10% rate of return.     </p>

<div class="highlight highlight-r"><pre><span class="c">pv.uneven(r = 0.1, cf = c(-10000, -5000, 2000, 4000, 6000, 8000))</span>
</pre></div>

<pre><code>[1] 747.1
</code></pre>

<h2>
<a name="example-10-loan-payment-calculation-annual-payments-and-quarterly-payments" class="anchor" href="#example-10-loan-payment-calculation-annual-payments-and-quarterly-payments"><span class="octicon octicon-link"></span></a>Example 10 Loan payment calculation: Annual payments and Quarterly payments</h2>

<p>A company plans to borrow $500,000 for five years. The company's bank will lend the money at a rate of 6% and requires that the loan be paid off in five equal end-of-year payments. Calculate the amount of the payment that the company must make in order to fully amortize this loan in five years.   </p>

<div class="highlight highlight-r"><pre><span class="c">pmt(r = 0.06, n = 5, pv = 5e+05, fv = 0)</span>
</pre></div>

<pre><code>[1] -118698
</code></pre>

<h2>
<a name="example-11-computing-the-number-of-periods-in-an-annuity" class="anchor" href="#example-11-computing-the-number-of-periods-in-an-annuity"><span class="octicon octicon-link"></span></a>Example 11 Computing the number of periods in an annuity</h2>

<p>How many $1000 end-of-year payments are required to accumulate $10,000 if the discount rate is 9%?   </p>

<div class="highlight highlight-r"><pre><span class="c">n.period(r = 0.09, pv = 0, fv = 10000, pmt = -1000, type = 0)</span>
</pre></div>

<pre><code>[1] 7.448
</code></pre>

<h2>
<a name="example-12-computing-the-rate-of-return-for-a-period" class="anchor" href="#example-12-computing-the-rate-of-return-for-a-period"><span class="octicon octicon-link"></span></a>Example 12 Computing the rate of return for a period</h2>

<p>Suppose you have the opponunity to invest $1000 at the end of each of the next five years in exchange for $6000 at the end of the fifth year. What is the annual rate of return on this investment?    </p>

<div class="highlight highlight-r"><pre><span class="c">discount.rate(n = 5, fv = 6000, pmt = -1000, pv = 0, type = 0)</span>
</pre></div>

<pre><code>[1] 0.0913
</code></pre>

<h2>
<a name="example-13-computing-npv" class="anchor" href="#example-13-computing-npv"><span class="octicon octicon-link"></span></a>Example 13 Computing NPV</h2>

<p>Calculate the NPV of an investment project with an initial cost of $6 million and positive cash flows of $2.6 million at the end of Year 1, $2.4 million at the end of Year 2, and $3.8 million at the end ofYear 3. Use 8% as the discount rate.   </p>

<div class="highlight highlight-r"><pre><span class="c">npv(r = 0.08, cf = c(-6, 2.6, 2.4, 3.8))</span>
</pre></div>

<pre><code>[1] 1.482
</code></pre>

<h2>
<a name="example-14-computing-irr" class="anchor" href="#example-14-computing-irr"><span class="octicon octicon-link"></span></a>Example 14 Computing IRR</h2>

<p>What is the IRR for the investment described in example 13?   </p>

<div class="highlight highlight-r"><pre><span class="c">irr(cf = c(-6, 2.6, 2.4, 3.8))</span>
</pre></div>

<pre><code>[1] 0.2033
</code></pre>

<h2>
<a name="example-15-computing-hpr" class="anchor" href="#example-15-computing-hpr"><span class="octicon octicon-link"></span></a>Example 15 Computing HPR</h2>

<p>Suppose a stock is purchased for $3 and is sold for $4 six months later, during which time it paid $0.50 in dividends. What is the holding period return?   </p>

<div class="highlight highlight-r"><pre><span class="c">hpr(ev = 4, bv = 3, cfr = 0.5)</span>
</pre></div>

<pre><code>[1] 0.5
</code></pre>

<h2>
<a name="example-16-computing-time-weighted-rate-of-return" class="anchor" href="#example-16-computing-time-weighted-rate-of-return"><span class="octicon octicon-link"></span></a>Example 16 Computing time-weighted rate of return</h2>

<p>An investor purchases a share of stock at t = 0 for $10. At the end of the year, t = 1 , the investor buys another share of the same stock for $12. At the end of Year 2, the investor sells both shares for $13 each. At the end of both years 1 and 2, the stock paid a $1 per share dividend. What is the annual time-weighted rate of return for this investment?    </p>

<div class="highlight highlight-r"><pre><span class="c">twrr(ev = c(12, 26), bv = c(10, 24), cfr = c(1, 2))</span>
</pre></div>

<pre><code>[1] 0.2315
</code></pre>

<h2>
<a name="example-17-computing-bank-discount-yield" class="anchor" href="#example-17-computing-bank-discount-yield"><span class="octicon octicon-link"></span></a>Example 17 Computing Bank discount yield</h2>

<p>Calculate the bank discount yield for a T-hill priced at $9,850, with a face value of $10,000 and 120 days until maturity.    </p>

<div class="highlight highlight-r"><pre><span class="c">bdy(d = 150, f = 10000, t = 120)</span>
</pre></div>

<pre><code>[1] 0.045
</code></pre>

<h2>
<a name="example-18-convert-holding-period-return-to-the-effective-annual-rate" class="anchor" href="#example-18-convert-holding-period-return-to-the-effective-annual-rate"><span class="octicon octicon-link"></span></a>Example 18 Convert holding period return to the effective annual rate</h2>

<p>Compute the EAY using the 120-day HPY of 2.85%.    </p>

<div class="highlight highlight-r"><pre><span class="c">hpr2ear(hpr = 0.0285, t = 120)</span>
</pre></div>

<pre><code>[1] 0.08923
</code></pre>

<h2>
<a name="example-19-computing-money-market-yield" class="anchor" href="#example-19-computing-money-market-yield"><span class="octicon octicon-link"></span></a>Example 19 Computing money market yield</h2>

<p>What is the money market yield for a 120-day T-bill that has a bank discount yield of 4.50%?    </p>

<div class="highlight highlight-r"><pre><span class="c">bdy2mmy(bdy = 0.045, t = 120)</span>
</pre></div>

<pre><code>[1] 0.04569
</code></pre>

<h2>
<a name="example-20-converting-among-ear-hpy-and-mmy" class="anchor" href="#example-20-converting-among-ear-hpy-and-mmy"><span class="octicon octicon-link"></span></a>Example 20 Converting among EAR, HPY, and MMY</h2>

<p>Assume the price of a $10,000 T-hill that matures in 150 days is $9,800. The quoted money market yield is 4.898%. Compute the HPY and the EAR.    </p>

<div class="highlight highlight-r"><pre><span class="c">hpr(ev = 10000, bv = 9800)</span>
</pre></div>

<pre><code>[1] 0.02041
</code></pre>

<div class="highlight highlight-r"><pre><span class="c">mmy2hpr(mmy = 0.04898, t = 150)</span>
</pre></div>

<pre><code>[1] 0.02041
</code></pre>

<div class="highlight highlight-r"><pre><span class="c">hpr2ear(hpr = mmy2hpr(mmy = 0.04898, t = 150), t = 150)</span>
</pre></div>

<pre><code>[1] 0.05039
</code></pre>

<div class="highlight highlight-r"><pre><span class="c">ear2hpr(ear = hpr2ear(hpr = mmy2hpr(mmy = 0.04898, t = 150), t = 150), t = 150)</span>
</pre></div>

<pre><code>[1] 0.02041
</code></pre>

<h2>
<a name="example-21-bond-equivalent-yield-calculation" class="anchor" href="#example-21-bond-equivalent-yield-calculation"><span class="octicon octicon-link"></span></a>Example 21 Bond-equivalent yield calculation</h2>

<p>What is the yield on a bond-equivalent basis of a 3-month loan has a holding period yield of 4%?       </p>

<div class="highlight highlight-r"><pre><span class="c">hpr2bey(hpr = 0.04, t = 3)</span>
</pre></div>

<pre><code>[1] 0.1632
</code></pre>

<p>What is the yield on a bond-equivalent basis of an investment with 6% effective annual yield?   </p>

<div class="highlight highlight-r"><pre><span class="c">ear2bey(ear = 0.06)</span>
</pre></div>

<pre><code>[1] 0.05913
</code></pre>

<h2>
<a name="example-22-weighted-mean-as-a-portfolio-return" class="anchor" href="#example-22-weighted-mean-as-a-portfolio-return"><span class="octicon octicon-link"></span></a>Example 22 Weighted mean as a portfolio return</h2>

<p>A portfolio consists of 40% common stocks, 50% bonds, and 10% cash. If the return on common stocks is 9%, the return on bonds is 6%, and the return on cash is 1%, what is the portfolio return?     </p>

<div class="highlight highlight-r"><pre><span class="c">wpr(r = c(0.09, 0.06, 0.01), w = c(0.4, 0.5, 0.1))</span>
</pre></div>

<pre><code>[1] 0.067
</code></pre>

<p>or   </p>

<div class="highlight highlight-r"><pre><span class="c">rs = c(0.09, 0.06, 0.01)</span>
<span class="c">ws = c(0.4, 0.5, 0.1)</span>
<span class="c">wpr(r = rs, w = ws)</span>
</pre></div>

<pre><code>[1] 0.067
</code></pre>

<h2>
<a name="example-23-geometric-mean-return" class="anchor" href="#example-23-geometric-mean-return"><span class="octicon octicon-link"></span></a>Example 23 Geometric mean return</h2>

<p>For the last three years, the returns for Acme Corporation common stock have been -5%, 11%, and 9%. Compute the compound annual rate of return over the 3-year period.     </p>

<div class="highlight highlight-r"><pre><span class="c">geometric.mean(r = c(-0.05, 0.11, 0.09))</span>
</pre></div>

<pre><code>[1] 0.04751
</code></pre>

<h2>
<a name="example-24-calculating-average-cost-with-the-harmonic-mean" class="anchor" href="#example-24-calculating-average-cost-with-the-harmonic-mean"><span class="octicon octicon-link"></span></a>Example 24 Calculating average cost with the harmonic mean</h2>

<p>An investor purchases $10,000 of stock each month, and over the last three months the prices paid per share were $4.5, $5.2, and $4.8. What is the average cost per share for the shares acquired?      </p>

<div class="highlight highlight-r"><pre><span class="c">harmonic.mean(p = c(4.5, 5.2, 4.8))</span>
</pre></div>

<pre><code>[1] 4.816
</code></pre>

<h2>
<a name="example-25-download-historical-%EF%AC%81nancial-data-from-yahoo-finance-and-google-finance" class="anchor" href="#example-25-download-historical-%EF%AC%81nancial-data-from-yahoo-finance-and-google-finance"><span class="octicon octicon-link"></span></a>Example 25 Download historical ﬁnancial data from Yahoo finance and Google Finance</h2>

<p>Download historical ﬁnancial data from Yahoo finance       </p>

<div class="highlight highlight-r"><pre><span class="c">apple &lt;- get.ohlc.yahoo(symbol = "AAPL", start = "2013-07-01", end = "2013-08-01")</span>
<span class="c">head(apple)</span>
</pre></div>

<pre><code>         date  open  high   low close   volume adjusted
23 2013-07-01 402.7 412.3 401.2 409.2 13966200    406.5
22 2013-07-02 410.0 421.6 409.5 418.5 16780900    415.7
21 2013-07-03 420.9 423.0 417.4 420.8  8604600    418.0
20 2013-07-05 420.4 423.3 415.4 417.4  9786600    414.7
19 2013-07-08 420.1 421.0 410.6 415.1 10647800    412.3
18 2013-07-09 413.6 423.5 410.4 422.4 12592300    419.6
</code></pre>

<p>Download historical ﬁnancial data from Google Finance    </p>

<div class="highlight highlight-r"><pre><span class="c">google &lt;- get.ohlc.google(symbol = "GOOG", start = "2013-07-01", end = "2013-08-01")</span>
<span class="c">head(google)</span>
</pre></div>

<pre><code>         date  open  high   low close  volume
23 2013-07-01 886.5 892.1 885.0 887.9 1726780
22 2013-07-02 890.2 891.0 877.3 882.3 1891812
21 2013-07-03 879.9 889.2 878.5 886.4 1048628
20 2013-07-05 890.0 895.4 887.3 893.5 1701830
19 2013-07-08 899.2 906.3 897.1 905.1 1970157
18 2013-07-09 911.0 913.0 898.0 905.2 1979338
</code></pre>

<p>Download multiple historical ﬁnancial data from Yahoo finance</p>

<div class="highlight highlight-r"><pre><span class="c">applegoog &lt;- get.ohlcs.yahoo(symbols = c("AAPL", "GOOG"), start = "2013-01-01", </span>
<span class="c">    end = "2013-07-31")</span>
<span class="c">head(applegoog$AAPL)</span>
</pre></div>

<pre><code>          date  open  high   low close   volume adjusted
146 2013-01-02 553.8 555.0 541.6 549.0 20018500    538.7
145 2013-01-03 547.9 549.7 541.0 542.1 12605900    531.9
144 2013-01-04 537.0 538.6 525.8 527.0 21226200    517.1
143 2013-01-07 522.0 529.3 515.2 523.9 17291300    514.0
142 2013-01-08 529.2 531.9 521.2 525.3 16382400    515.4
141 2013-01-09 522.5 525.0 516.0 517.1 14557300    507.4
</code></pre>

<div class="highlight highlight-r"><pre><span class="c">head(applegoog$GOOG)</span>
</pre></div>

<pre><code>          date  open  high   low close  volume adjusted
146 2013-01-02 719.4 727.0 716.5 723.2 2541300    723.2
145 2013-01-03 724.9 731.9 720.7 723.7 2318200    723.7
144 2013-01-04 729.3 741.5 727.7 738.0 2763500    738.0
143 2013-01-07 735.5 739.4 730.6 734.8 1655700    734.8
142 2013-01-08 735.5 736.3 724.4 733.3 1676100    733.3
141 2013-01-09 732.3 738.4 728.6 738.1 2024700    738.1
</code></pre>

<p>Download multiple historical ﬁnancial data from Google Finance</p>

<div class="highlight highlight-r"><pre><span class="c">all &lt;- get.ohlcs.google(symbols = c("YHOO", "SPY", "SINA"), start = "2013-01-01", </span>
<span class="c">    end = "2013-07-31")</span>
<span class="c">head(all$YHOO)</span>
</pre></div>

<pre><code>          date  open  high   low close   volume
146 2013-01-02 20.20 20.32 20.01 20.08 20463033
145 2013-01-03 20.05 20.10 19.72 19.78 19599094
144 2013-01-04 19.76 19.95 19.72 19.86 12489700
143 2013-01-07 19.56 19.58 19.28 19.40 23866609
142 2013-01-08 19.32 19.68 19.30 19.66 16932176
141 2013-01-09 19.73 19.75 19.22 19.33 21656278
</code></pre>

<div class="highlight highlight-r"><pre><span class="c">head(all$SPY)</span>
</pre></div>

<pre><code>          date  open  high   low close    volume
146 2013-01-02 145.1 146.2 144.7 146.1 192058911
145 2013-01-03 146.0 146.4 145.3 145.7 144761781
144 2013-01-04 146.0 146.6 145.7 146.4 116817675
143 2013-01-07 145.8 146.4 145.4 146.0 110002444
142 2013-01-08 145.7 145.9 145.0 145.6 121265078
141 2013-01-09 145.9 146.3 145.6 145.9  90745581
</code></pre>

<div class="highlight highlight-r"><pre><span class="c">head(all$SINA)</span>
</pre></div>

<pre><code>          date  open  high   low close  volume
146 2013-01-02 52.24 55.19 51.75 52.27 3947513
145 2013-01-03 52.34 53.61 51.54 52.77 2200712
144 2013-01-04 52.70 52.94 51.70 52.76 1466652
143 2013-01-07 51.81 52.67 51.40 52.57 1368991
142 2013-01-08 52.20 53.00 51.41 51.81 1381026
141 2013-01-09 51.76 52.43 50.61 51.54 2098518
</code></pre>

<h2>
<a name="example-26-plots-open-high-low-close-chart-of-%EF%AC%81nancial-time-series" class="anchor" href="#example-26-plots-open-high-low-close-chart-of-%EF%AC%81nancial-time-series"><span class="octicon octicon-link"></span></a>Example 26 Plots open-high-low-close chart of (ﬁnancial) time series.</h2>

<p>Line chart   </p>

<div class="highlight highlight-r"><pre><span class="c">apple &lt;- get.ohlc.yahoo(symbol = "AAPL", start = "2013-07-01", end = "2013-08-01")</span>
<span class="c">lineChart(apple)</span>
</pre></div>

<p><img src="figure/unnamed-chunk-36.png" alt="plot of chunk unnamed-chunk-36"></p>

<p>Candlestick chart     </p>

<div class="highlight highlight-r"><pre><span class="c">google &lt;- get.ohlc.yahoo("GOOG", start = "2013-07-01", end = "2013-08-01")</span>
<span class="c">candlestickChart(google)</span>
</pre></div>

<p><img src="figure/unnamed-chunk-37.png" alt="plot of chunk unnamed-chunk-37"></p>

<p>Volume chart   </p>

<div class="highlight highlight-r"><pre><span class="c">apple &lt;- get.ohlc.google("AAPL")</span>
<span class="c">volumeChart(apple)</span>
</pre></div>

<p><img src="figure/unnamed-chunk-38.png" alt="plot of chunk unnamed-chunk-38"></p>

<p>Multiple line chart   </p>

<div class="highlight highlight-r"><pre><span class="c">googapple &lt;- get.ohlcs.yahoo(c("GOOG", "AAPL", "SPY"), start = "2013-01-01", </span>
<span class="c">    end = "2013-06-30")</span>
<span class="c">lineChartMult(googapple)</span>
</pre></div>

<p><img src="figure/unnamed-chunk-39.png" alt="plot of chunk unnamed-chunk-39"></p>

<h2>
<a name="examples-27-inventory-expense-recognition----cost-of-goods-sold" class="anchor" href="#examples-27-inventory-expense-recognition----cost-of-goods-sold"><span class="octicon octicon-link"></span></a>Examples 27 Inventory Expense Recognition -- cost of goods sold</h2>

<p>Three methods: first-in, first-out (FIFO) method; last-in, first-out (LIFO) method; weighted average cost method.</p>

<p>e.g. during one month<br>
beginning inventory: 20 units @ $2/unit<br>
buy                : 30 units @ $3/unit<br>
buy                : 50 units @ $5/unit<br>
sold               : 70 units<br>
what is the cost of goods sold using three menthod?   </p>

<div class="highlight highlight-r"><pre><span class="c"># first-in, first-out (FIFO) method</span>
<span class="c">cogs(uinv = 20, pinv = 2, units = c(30, 50), price = c(3, 5), sinv = 70, method = "FIFO")</span>
</pre></div>

<pre><code>$costOfGoods
[1] 230

$endingInventory
[1] 150
</code></pre>

<div class="highlight highlight-r"><pre><span class="c"># last-in, first-out (LIFO) method</span>
<span class="c">cogs(uinv = 20, pinv = 2, units = c(30, 50), price = c(3, 5), sinv = 70, method = "LIFO")</span>
</pre></div>

<pre><code>$costOfGoods
[1] 310

$endingInventory
[1] 70
</code></pre>

<div class="highlight highlight-r"><pre><span class="c"># weighted average cost method</span>
<span class="c">cogs(uinv = 20, pinv = 2, units = c(30, 50), price = c(3, 5), sinv = 70, method = "WAC")</span>
</pre></div>

<pre><code>$costOfGoods
[1] 266

$endingInventory
[1] 114
</code></pre>

<h2>
<a name="example-28-depreciation-expense-recognition" class="anchor" href="#example-28-depreciation-expense-recognition"><span class="octicon octicon-link"></span></a>Example 28 Depreciation Expense Recognition</h2>

<p>Methods: straight line depreciation method, double-declining balance (DDB)<br>
e.g.,<br>
One Company recently purchased a machine at a cost of $9,800. The machine is expected to have a residual value of $2,000 at the end of its useful life in five years. What is the depreciation expense for all five years using two different menthods?  </p>

<div class="highlight highlight-r"><pre><span class="c"># straight line depreciation method</span>
<span class="c">slde(cost = 9800, rv = 2000, t = 5)</span>
</pre></div>

<pre><code>[1] 1560
</code></pre>

<div class="highlight highlight-r"><pre><span class="c"># double-declining balance (DDB)</span>
<span class="c">ddb(cost = 9800, rv = 2000, t = 5)</span>
</pre></div>

<pre><code>     t    ddb
[1,] 1 3920.0
[2,] 2 2352.0
[3,] 3 1411.2
[4,] 4  116.8
[5,] 5    0.0
</code></pre>

<h2>
<a name="example-29-weighted-average-shares-and-eps" class="anchor" href="#example-29-weighted-average-shares-and-eps"><span class="octicon octicon-link"></span></a>Example 29 Weighted average shares and EPS</h2>

<p>One company has net income of $100,000 and paid $10,000 cash dividends to its preferred shareholders and $10,750 cash dividends to its common shareholders. At the beginning of the year, there were 20,000 shares of common stock outstanding. 20,000 new shares were issued on July 1 . what is the weighted average shares and basic EPS?   </p>

<div class="highlight highlight-r"><pre><span class="c"># weighted average shares</span>
<span class="c">was = was(ns = c(20000, 20000), nm = c(12, 6))</span>
<span class="c">was</span>
</pre></div>

<pre><code>[1] 30000
</code></pre>

<div class="highlight highlight-r"><pre><span class="c"># basic EPS</span>
<span class="c">EPS(ni = 1e+05, pd = 10000, w = was)</span>
</pre></div>

<pre><code>[1] 3
</code></pre>

<p>One company has 15,000 shares outstanding all year. It had 2,000 outstanding warrants all year, convertible into one share each at $20 per share. The year-end price of stock was $40, and the average stock price was $30. What effect will these warrants have on the weighted average number of shares?</p>

<div class="highlight highlight-r"><pre><span class="c">iss(amp = 30, ep = 20, n = 2000)</span>
</pre></div>

<pre><code>[1] 666.7
</code></pre>

<p>During 2013, X reported net income of $231,200 and had 400,000 shares of
common stock outstanding for the entire year. X had 2,000 shares of 10%, $100
par convertible preferred stock, convertible into 40 shares each, outstanding for the
entire year. X also had 1200, 7%, $1,000 par value convertible bonds, convertible
into 100 shares each, outstanding for the entire year. Finally, X had 20,000 stock
options outstanding during the year. Each option is convertible into one share of
stock at $15 per share. The average market price of the stock for the year was $20. The tax rate is 40%. What are X's basic and diluted EPS?</p>

<div class="highlight highlight-r"><pre><span class="c">EPS(ni = 231200, pd = 2000 * 0.1 * 100, w = 4e+05)</span>
</pre></div>

<pre><code>[1] 0.528
</code></pre>

<div class="highlight highlight-r"><pre><span class="c">iss = iss(amp = 20, ep = 15, n = 20000)</span>
<span class="c">diluted.EPS(ni = 231200, pd = 2000 * 0.1 * 100, cpd = 2000 * 0.1 * 100, cdi = 1200 * </span>
<span class="c">    0.07 * 1000, tax = 0.4, w = 4e+05, cps = 2000 * 40, cds = 1200 * 100, iss = iss)</span>
</pre></div>

<pre><code>[1] 0.4655
</code></pre>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/felixfan/FinCal/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/felixfan/FinCal/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/felixfan/FinCal"></a> is maintained by <a href="https://github.com/felixfan">felixfan</a>.</p>

          <p>This page was generated by <a href="pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-44240871-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>